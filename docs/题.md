#### **问题1：spring和springmvc的常用注解有哪些？**

​	答：Spring注解：

1. @Component: 将类标记为组件，由Spring进行扫描和管理。
2. @Controller: 将类标记为控制器，用于处理Web请求。
3. @Service: 将类标记为服务层组件，用于处理业务逻辑。
4. @Repository: 将类标记为持久层组件，通常与数据库访问相关。
5. @Autowired: 自动装配依赖，用于向类的属性、构造函数或方法注入实例。
6. @Qualifier: 与@Autowired一起使用，用于指定注入的类的名称。
7. @Value: 注入配置属性值。
8. @Configuration: 表示当前类是一个配置类，用于配置Bean和其他组件。
9. @Bean: 在配置类中定义Bean。
10. @Scope: 设置Bean的作用域。

Spring MVC注解：

1. @RequestMapping: 映射HTTP请求的URL路径和处理方法，可以用于类和方法级别。
2. @RequestParam: 获取请求参数的值。
3. @PathVariable: 获取URL路径的变量值。
4. @ModelAttribute: 绑定请求参数到方法参数或模型属性。
5. @ResponseBody: 处理方法的返回值作为响应体返回给客户端。
6. @ControllerAdvice: 全局异常处理和全局数据绑定。
7. @Valid: 标记方法参数需要进行数据验证。
8. @InitBinder: 初始化数据绑定器。

#### **问题2：springmvc框架的执行流程？**

答：Spring MVC框架的执行流程如下：

1. 客户端发送HTTP请求到DispatcherServlet（前端控制器）。
2. DispatcherServlet接收到请求后，根据请求信息调用HandlerMapping（处理器映射器）来确定具体的处理器(Controller)。
3. HandlerMapping将找到的处理器返回给DispatcherServlet。
4. DispatcherServlet调用HandlerAdapter（处理器适配器）执行处理器。
5. HandlerAdapter将处理器执行的结果封装为ModelAndView对象返回给DispatcherServlet。
6. DispatcherServlet选择合适的ViewResolver（视图解析器）来解析ModelAndView对象。
7. ViewResolver解析后返回具体的View对象给DispatcherServlet。
8. DispatcherServlet请求View对象进行视图渲染。
9. View将渲染的结果返回给DispatcherServlet。
10. DispatcherServlet将响应结果返回给客户端。

#### 问题3：mybatis中单个参数和多个参数如何定义？

答：单个参数：直接使用Java对象作为传入参数，无需进行特殊定义。

​		多个参数：使用`@Param`注解指定参数的名称，可以在SQL语句中使用这个名称来引用参数。



#### 问题4：resulttype和resultmap有什么区别？

答：

1. 使用方式：`resultType`直接指定返回结果的类型，而`resultMap`需要定义一个`resultMap`来指定查询结果与Java对象的映射规则。
2. 灵活性：`resultType`适用于简单的查询场景，只能指定一种类型作为返回结果，而`resultMap`适用于复杂的查询场景，可以自定义映射规则，提供更灵活的结果映射方式。
3. 可读性：`resultType`的使用比较简单，一眼就能看出返回的结果类型是什么，而`resultMap`在配置复杂的映射规则时，可能需要更多的配置信息，可读性稍差。
4. 代码复用：`resultType`只能指定一个类型作为返回结果，无法复用，而`resultMap`可以定义一个`resultMap`并在多个查询方法中复用。

#### 问题5：spring核心功能有哪些？

答：

1. 控制反转（IoC）：Spring框架通过控制反转将对象的创建、依赖关系的管理交给了Spring容器，通过配置文件或注解来配置对象的创建和依赖关系，降低了组件之间的耦合度，提高了代码的可维护性和可测试性。
2. 面向切面编程（AOP）：Spring框架提供了基于代理的AOP实现，可以通过配置或注解将一些横切关注点（如事务管理、日志记录等）与业务代码解耦，提高了系统的可扩展性和可维护性。
3. 数据访问：Spring框架提供了对各种数据访问技术的支持，包括JDBC、ORM框架（如Hibernate、MyBatis）、JPA等，通过统一的接口和配置，简化了数据访问的编程和管理。
4. MVC框架：Spring框架提供了一个灵活强大的MVC框架，可以方便地开发Web应用程序，支持多种视图技术（如JSP、Thymeleaf等），提供了请求映射、参数绑定、数据验证等功能。
5. 集成其他框架和技术：Spring框架可以与其他框架和技术（如Hibernate、MyBatis、Quartz等）进行集成，简化了整合过程，提供了更便捷和统一的开发方式。
6. 事务管理：Spring框架提供了声明式的事务管理，可以通过配置或注解来管理事务，简化了事务管理的编程和配置。
7. 安全性：Spring框架提供了对安全性的支持，包括认证、授权、加密等功能，可以实现基于角色的访问控制和用户认证。

#### 问题6：springmvc的过滤器和拦截器的区别？

答：

1. 触发时机：过滤器在请求进入Servlet容器之前进行拦截，而拦截器在请求到达Controller之前进行拦截。
2. 使用范围：过滤器可以对所有的请求进行拦截，包括静态资源请求，而拦截器只能对Controller中的请求进行拦截。
3. 运行顺序：过滤器是按照在web.xml中的配置顺序依次执行，而拦截器是根据配置的顺序依次执行。
4. 处理对象：过滤器对请求进行处理，可以修改请求或响应的内容，而拦截器可以在请求到达Controller之前和返回响应之前，进行一些处理操作，如日志记录、权限校验等。
5. 配置方式：过滤器需要在web.xml中进行配置，而拦截器可以通过配置文件或注解来配置。

总体来说，过滤器更加底层，更为通用，可以拦截所有请求；而拦截器更加灵活，只针对Controller中的请求进行拦截，且可以进行更多的自定义处理。在项目中选择使用哪种方式，可以根据具体的需求和场景来决定。

#### 问题7：springmvc中如何解决中文乱码问题？（分get和post）

答：

1. GET请求：

   - 使用URLEncoder对参数进行编码，在发送GET请求时手动编码参数，例如：

     ```java
     // GET请求中的参数编码
     String encodedParam = URLEncoder.encode(param, "UTF-8");
     String url = "/path?param=" + encodedParam;
     ```

2. POST请求：

   - 使用CharacterEncodingFilter过滤器：通过在web.xml中配置CharacterEncodingFilter过滤器，设置字符编码为UTF-8，例如：

     ```xml
     <filter>
         <filter-name>encodingFilter</filter-name>
         <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
         <init-param>
             <param-name>encoding</param-name>
             <param-value>UTF-8</param-value>
         </init-param>
         <init-param>
             <param-name>forceEncoding</param-name>
             <param-value>true</param-value>
         </init-param>
     </filter>
     
     <filter-mapping>
         <filter-name>encodingFilter</filter-name>
         <url-pattern>/*</url-pattern>
     </filter-mapping>
     ```

   - 在Controller中添加@RequestParam注解，并设置编码为UTF-8，例如：

     ```java
     @RequestMapping(value = "/path", method = RequestMethod.POST)
     public String handlePostRequest(@RequestParam(value = "param", required = false) String param, Model model) {
         // 处理请求
         // ...
     }
     ```

通过以上方式，可以解决Spring MVC中的中文乱码问题。

#### 问题 8:mybatis 中#｛｝和￥｛｝区别？

答：

1.#{}一定不能写在引号里面，${}一定要写在引号里面

2.如果是pojo、map类型的参数，无论是#{}还是${}里面都是些属性名

3.#{}  能防止sql 注入，${}  不能防止sql 注入

#### 
问题 9: mybatis 的缓存机制，一级缓存和 2 级缓存区别？

答：

1. 一级缓存：
   - 一级缓存是默认开启的，它是在SqlSession级别的缓存，即在同一个SqlSession中执行相同的SQL语句，第一次查询会将结果缓存起来，并在后续的查询中直接从缓存中获取数据，而不需要再发送SQL查询到数据库。
   - 一级缓存的生命周期与SqlSession一致，当SqlSession关闭时，一级缓存也会被清空。
   - 一级缓存是充分利用了JDBC的本地缓存机制，对于重复查询效果显著，但只能在同一个SqlSession中使用，跨SqlSession无效。
2. 二级缓存：
   - 二级缓存是基于Mapper级别的缓存，多个SqlSession共享同一个Mapper的二级缓存。
   - 二级缓存需要手动开启，通过在MyBatis配置文件中的mapper标签中添加`<cache/>`元素来启用。
   - 二级缓存的生命周期与整个应用程序的运行周期一致，当应用程序关闭时，二级缓存才会被清空。
   - 二级缓存可以在多个SqlSession之间共享缓存数据，减少数据库的访问请求，并且可以跨SqlSession进行有效的缓存数据共享。

总的来说，一级缓存是SqlSession级别的缓存，用于减少在同一个SqlSession中的重复查询，而二级缓存是Mapper级别的缓存，用于在多个SqlSession之间共享缓存数据，减少数据库的访问请求。在使用缓存时，需要根据具体的业务需求和性能需求选择适合的缓存机制。

#### 问题 10:springboot 启动器执行原理？

答：启动器的执行原理如下：

1. 在Spring Boot的应用程序中，通过在项目的pom.xml文件中引入相应的启动器依赖，例如`spring-boot-starter-web`。
2. 启动器依赖会自动检测到并引入相关的依赖项，这些依赖项通常是一组实现某个特定功能的库或框架。
3. 启动器会自动配置这些依赖项的默认行为，也可以通过配置文件或代码进行自定义配置。
4. 在应用程序启动过程中，Spring Boot会自动扫描并加载启动器中定义的自动配置类。
5. 自动配置类会根据条件进行自动配置，例如检测到某个类存在时才开启特定的配置。
6. 自动配置类会根据实际的需要进行必要的配置，例如创建相应的Bean并设置其属性。
7. 应用程序启动完成后，可以直接使用引入的依赖项提供的功能，而不需要手动配置和初始化。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      





#### 问题11：mysql中左外联和右外联区别，获得的数据是否一样？

答：左外联（Left Outer Join）是指保留左表的所有记录，只输出左表和右表中匹配的记录。如果右表中没有匹配的记录，则右表的所有字段显示为NULL。

右外联（Right Outer Join）与左外联相反，保留右表的所有记录，只输出左表和右表中匹配的记录。如果左表中没有匹配的记录，则左表的所有字段显示为NULL。

简单来说，左外联和右外联都包含了两个表共同匹配的记录，但输出的结果中NULL值的位置不同。左外联显示右表中没有匹配的记录，右外联显示左表中没有匹配的记录。

所以，左外联和右外联得到的数据是不一样的，主要差异在于NULL值的位置不同。

#### 问题12：sql优化方式有哪些？

1. 优化查询语句：
   - 使用索引：在经常使用作为查询条件的列上创建索引，以加快查询速度。
   - 优化 JOIN 操作：确保 JOIN 操作中的关联字段上有索引，并使用适当的 JOIN 类型。
   - 减少数据检索量：只选择需要的列，而不是使用 SELECT * 检索所有列。
   - 使用适当的条件过滤：使用 WHERE 子句和其他条件过滤无关的数据。
   - 调整查询顺序：根据查询的逻辑，调整表的顺序，推动最小数据集进行过滤。
2. 优化表结构：
   - 合理设计表结构：根据数据的实际情况，将数据拆分到不同的表中，并进行合理的关联。
   - 设计适当的数据类型：选择适当的数据类型来节省存储空间和提高查询性能。
   - 使用合适的主键和索引：为表选择合适的主键和索引，使查询和连接操作更高效。
3. 缓存查询结果：
   - 将频繁查询的结果缓存在内存中，避免不必要的数据库查询。
   - 使用缓存系统（如 Redis）来缓存频繁查询的结果，以加速查询响应时间。
4. 根据实际情况进行分区：
   - 对大型表进行分区，根据某个列的值将数据水平划分成多个分区，以提高查询性能。
   - 根据数据的使用频率，将热点数据和冷数据分别存放在不同的分区中。
5. 定期执行数据库维护任务：
   - 定期执行数据库的优化任务，如重新生成索引、收集统计信息、清理过期数据等。
6. SQL 查询重构：
   - 优化低效的查询语句，查找并消除查询中的性能瓶颈。
   - 多个小查询合并为一个复杂查询，减少数据库连接的开销。
   - 尽量避免使用子查询，可以使用关联查询或临时表等方式替代。

#### 问题13：drop,delete,truncate区别？

答：在数据库中，`DROP`，`DELETE` 和 `TRUNCATE` 是不同的操作命令，用于删除表或删除表中的数据，它们有以下区别：

1. `DROP`：
   - `DROP` 是用于删除整个表的命令。
   - 执行 `DROP` 操作将永久删除表结构和表中的所有数据。
   - `DROP` 操作是不可逆的，删除后无法撤销，请谨慎使用。
   - 语法示例：`DROP TABLE table_name;`
2. `DELETE`：
   - `DELETE` 是用于删除表中的数据的命令。
   - `DELETE` 操作可以根据指定的条件删除表中的部分或全部数据。
   - 执行 `DELETE` 操作后，已删除的数据可以使用事务回滚进行恢复。
   - 语法示例：`DELETE FROM table_name WHERE condition;`
3. `TRUNCATE`：
   - `TRUNCATE` 用于删除表中的所有数据。
   - `TRUNCATE` 操作将删除表中的所有数据，但保留表结构。
   - `TRUNCATE` 操作比 `DELETE` 操作更快，因为它不会写入事务日志，也不会触发触发器。
   - 执行 `TRUNCATE` 操作后，被删除的数据无法恢复。
   - 语法示例：`TRUNCATE TABLE table_name;`

总结：

- `DROP` 删除整个表，包括表结构和数据，是不可逆操作。
- `DELETE` 删除表中的数据，可以根据条件选择删除的数据，可以进行事务回滚恢复已删除的数据。
- `TRUNCATE` 删除表中的所有数据，但保留表结构，比 `DELETE` 更快，不写入事务日志，无法恢复被删除的数据。

根据需要和场景的不同，选择适当的操作来删除表或删除表中的数据。注意在执行删除操作之前，务必备份重要的数据，并仔细评估潜在的风险和影响

#### 问题14：jdbc和mybatis的效率谁快？

答：

1. JDBC（Java Database Connectivity）：
   - JDBC 是 Java 提供的标准数据库访问 API，提供了一种通用的方式来连接和操作各种数据库。
   - 使用 JDBC，开发人员需要手动编写 SQL 查询语句、执行语句和处理结果集等操作。
   - JDBC 直接操作底层数据库，因此具有较低的封装层次和更高的灵活性。
   - 由于需要手动编写 SQL，对于大型复杂的数据库操作，开发和维护成本较高。
2. MyBatis：
   - MyBatis 是一个基于 Java 的持久层框架，为开发人员提供了更简单和高效的数据库访问方式。
   - MyBatis 封装了 JDBC，提供了一种通过 XML 或注解配置来映射 SQL 查询和结果映射的方式。
   - MyBatis 通过提供对象-关系映射（ORM）功能，将 Java 对象和数据库表之间进行映射，减少了手动编写 SQL 的工作量。
   - MyBatis 提供了较高的抽象层，简化了数据库操作，提供了缓存、动态 SQL、延迟加载等功能，提高了开发效率。

在性能方面，通常情况下，JDBC 直接操作底层数据库，因此在特定场景下可能比 MyBatis 更快。但是，这取决于实际的使用情况和优化措施。

MyBatis 在一些方面提供了性能优化的功能，例如：

- 缓存机制：MyBatis 提供了一级缓存和二级缓存，可以减少对数据库的访问次数。
- 延迟加载：MyBatis 支持延迟加载，在需要时才加载关联的数据，可以提高性能。
- 动态 SQL：MyBatis 的动态 SQL 功能可以根据条件动态生成 SQL，可以减少不必要的数据读取和处理。

综上所述，JDBC 在底层操作和灵活性方面更胜一筹，而 MyBatis 则提供了更高级的功能和更便捷的开发体验。在性能方面，如果开发人员能够充分利用 MyBatis 提供的优化功能，并进行适当的数据库设计和查询优化，MyBatis 可能会更快速和高效。然而，在特定的业务场景和具体的实现方式下，也有可能 JDBC 在性能上表现更好。因此，选择 JDBC 还是 MyBatis，需要根据具体情况进行评估和决策。

#### 问题15：你了解哪些ORM？





#### 问题16:	springmvc的事务

答：

#### 问题17： 序列化和反序列化的目的，主要用在你项目的哪些地方？

答：序列化的主要目的是将对象转化为字节流，使其能够在网络上传输或在存储设备上进行持久化存储。通过序列化，可以将对象转换成一串字节，然后将字节传输给其他系统或存储在磁盘上。这样就可以实现跨系统的数据传输和数据持久化。

反序列化的主要目的是将字节流转化为对象，使其能够恢复为原始的Java对象。通过反序列化，可以将字节流转换回原始的Java对象，以便对数据进行读取、操作和处理。

在项目中，序列化和反序列化主要用在以下几个方面：

1. 分布式系统通信：当使用网络进行分布式系统间的通信时，常常需要将对象序列化为字节流，并通过网络传输给其他系统。接收方收到字节流后，可以通过反序列化将字节流还原为对象。
2. 数据持久化：在项目中，有时需要将对象保存在关系型数据库、缓存或文件系统中进行持久化存储。通过将对象序列化为字节流，可以将其存储在持久化设备中；而在需要使用时，可以通过反序列化将字节流还原为对象。
3. 分布式缓存：分布式缓存系统如Redis、Memcached等可以缓存对象，但缓存通常只能存储字符串等原始数据类型。为了能够将对象存储到缓存中，需要将对象序列化为字节流后存储。读取时则需要将字节流反序列化为对象。

#### 问题18：sql语句如何查重？

答：

1. 使用DISTINCT关键字：使用SELECT DISTINCT语句可以返回唯一的记录，即去重。例如：SELECT DISTINCT column_name FROM table_name;
2. 使用GROUP BY子句：通过将列名放入GROUP BY子句中，然后使用COUNT函数来统计每个组中的记录数量。通过判断记录数量是否大于1，可以找到重复的记录。例如：SELECT column_name, COUNT(*) FROM table_name GROUP BY column_name HAVING COUNT(*) > 1;
3. 使用EXISTS子查询：可以编写一个子查询，检查是否存在相同的记录。通过将子查询与外部查询结合，可以找到重复的记录。例如：SELECT column_name FROM table_name t1 WHERE EXISTS (SELECT 1 FROM table_name t2 WHERE t1.column_name = t2.column_name AND t1.id <> t2.id);
4. 使用UNION ALL：通过使用UNION ALL操作符，将两个或多个查询的结果集合并在一起，然后使用GROUP BY和HAVING来查找重复记录。例如：SELECT column_name, COUNT(*) FROM (SELECT column_name FROM table_name1 UNION ALL SELECT column_name FROM table_name2) subquery GROUP BY column_name HAVING COUNT（）> 1;

#### 问题19：git如何创建分支和管理？

答：

1. 创建分支：
   - 创建一个新的分支：`git branch branch_name`
   - 创建并切换到该分支：`git checkout -b branch_name` 或 `git switch -c branch_name`（Git 2.23或更高版本）
2. 切换分支：
   - 切换到一个已存在的分支：`git checkout branch_name` 或 `git switch branch_name`（Git 2.23或更高版本）
3. 查看分支：
   - 查看本地所有分支：`git branch`
   - 查看远程所有分支：`git branch -r`
   - 查看本地和远程所有分支：`git branch -a`
4. 删除分支：
   - 删除本地分支：`git branch -d branch_name`
   - 强制删除本地分支：`git branch -D branch_name`
   - 删除远程分支（需要push权限）：`git push origin --delete branch_name`
5. 合并分支：
   - 将另一个分支合并到当前分支：`git merge branch_name`
6. 提交分支更改：
   - 添加更改到暂存区：`git add .` 或 `git add file_name`
   - 提交更改到当前分支：`git commit -m "commit message"`
7. 推送分支到远程仓库：
   - 推送分支到远程仓库：`git push origin branch_name`
   - 设置本地分支与远程分支的关联：`git push -u origin branch_name`
8. 查看分支历史：
   - 查看分支的提交历史：`git log --branch_name`

#### 问题20：集合转数组的实现

答：在Java中，可以通过几种方法将集合转换为数组。

**方法一：使用`toArray()`方法**

```java
// 创建一个集合
Set<Integer> mySet = new HashSet<>();
mySet.add(1);
mySet.add(2);
mySet.add(3);

// 将集合转换为数组
Integer[] myArray = mySet.toArray(new Integer[mySet.size()]);

// 打印结果
System.out.println(Arrays.toString(myArray));
```

**方法二：使用循环遍历集合并逐个添加到数组中**

```java
// 创建一个集合
Set<Integer> mySet = new HashSet<>();
mySet.add(1);
mySet.add(2);
mySet.add(3);

// 创建一个数组
Integer[] myArray = new Integer[mySet.size()];

// 循环遍历集合并添加到数组
int index = 0;
for(Integer element : mySet) {
    myArray[index++] = element;
}

// 打印结果
System.out.println(Arrays.toString(myArray));
```

**方法三：使用Java 8的流处理方式**

```java
// 创建一个集合
Set<Integer> mySet = new HashSet<>();
mySet.add(1);
mySet.add(2);
mySet.add(3);

// 将集合转换为数组
Integer[] myArray = mySet.stream().toArray(Integer[]::new);

// 打印结果
System.out.println(Arrays.toString(myArray));
```



#### 问题21：说一下集合类

答：集合类是Java中的一组类，用于存储和操作一组对象。它们提供了一系列的方法来添加、删除、查找和遍历集合中的元素。集合类提供了一些不同的实现，每个实现都有自己的特点和适用场景。

常见的集合类有以下几种：

1. List：用于存储有序的元素，并可以根据索引访问元素。常见的实现类有ArrayList和LinkedList。ArrayList实现了动态数组，它可以自动扩容；LinkedList实现了双向链表，支持从头部和尾部进行操作。
2. Set：用于存储不重复的元素，不允许出现重复的元素。常见的实现类有HashSet和TreeSet。HashSet使用哈希表实现，具有较好的查询速度；TreeSet使用红黑树实现，可以对元素进行排序。
3. Map：用于存储键值对，并可以根据键查找值。常见的实现类有HashMap和TreeMap。HashMap使用哈希表实现，根据键的哈希值快速查找；TreeMap使用红黑树实现，可以根据键对元素进行排序。

除了以上常见的集合类，Java还提供了一些其他的集合类，如Queue、Stack等。它们都提供了一系列的方法来操作集合中的元素，并且各自有自己的特点和适用场景。

总的来说，集合类是Java中非常重要的一个部分，它们提供了方便和灵活的方式来存储和操作一组对象。合理地使用集合类能够提高代码的效率和可读性。

#### 问题22：为什么要重写equals方法？

答：在Java中，Object类提供了一个默认的equals方法，用于比较两个对象的引用是否相等。但是，有时候我们想要比较对象的内容是否相等，而不仅仅是引用是否相等。这时就需要重写equals方法。

重写equals方法的目的是为了定义对象的相等比较规则。一般来说，我们希望当两个对象的内容相同或符合某种自定义的相等条件时，equals方法返回true，否则返回false。

需要注意的是，重写equals方法时需要遵循一些规则：

1. 自反性：对于任何非null对象x，x.equals(x)应该返回true。
2. 对称性：对于任何非null对象x和y，如果x.equals(y)返回true，那么y.equals(x)也应该返回true。
3. 传递性：对于任何非null对象x、y和z，如果x.equals(y)返回true，并且y.equals(z)返回true，那么x.equals(z)也应该返回true。
4. 一致性：对于任何非null对象x和y，只要equals的比较条件没有被修改，那么多次调用x.equals(y)的结果应该保持一致。
5. 对于任何非null对象x，x.equals(null)应该返回false。

如果不重写equals方法，对象之间的比较将仅仅是引用的比较，而不是内容的比较。这在某些情况下可能不符合我们的期望，因此需要重写equals方法来定义自己的比较规则。

#### 问题23：重写equals方法时为什么也要重写hashcode方法？

答：是为了提高效率，采取重写hashcode方法，先进行hashcode比较，如果不同，那么就没必要在进行equals的比较了，这样就大大减少了equals比较的次数，这对比需要比较的数量很大的效率提高是很明显的。

为了保证同一个对象，保证在equals相同的情况下hashcode值必定相同，如果重写了equals而未重写hashcode方法，可能就会出现两个没有关系的对象equals相同的（因为equal都是根据对象的特征进行重写的），但hashcode确实不相同的。

保证是同一个对象，如果重写了equals方法，而没有重写hashcode方法，会出现equals相等的对象，hashcode不相等的情况，重写hashcode方法就是为了避免这种情况的出现。

因为HashMap是用equals判断键是否相等的，用反证法，如果两个键 equals相等，而hashcode不等的话，那么就无法保证通过hashcode计算的下标值相等，下标值不等也就意味着相等的两个键却 到了不同的值，这肯定是不对的，同一个对象定位到了不同的value。

#### 问题24：bean的生命周期

答：

1. 实例化：当容器加载配置文件或者通过编程方式定义Bean时，会创建Bean的实例。
2. 属性注入：在实例化完成后，容器会将配置文件中或者通过编程方式设置的属性值注入到Bean中。
3. 初始化：在属性注入完成后，容器会调用Bean的初始化方法。该方法可以通过注解@PostConstruct来标记。
4. 使用：Bean初始化完成后，可以使用该Bean来执行相应的业务逻辑。
5. 销毁：当容器关闭时，会调用Bean的销毁方法，该方法可以通过注解@PreDestroy来标记。

需要注意的是，Bean的生命周期是由容器来管理的，可以通过配置文件或者编程方式来控制Bean的创建、初始化和销毁过程。

#### 问题25：反射的原理及类加载机制

答：Java反射是指在运行时动态地获取类的信息及操作类的成员（属性、方法、构造器等）的能力。反射可以使我们在编译期无法获取信息的类，在运行时获取并使用这些类的信息。

Java的类加载机制是指将类的.class文件加载到Java虚拟机中，并进行初始化、验证、解析等步骤，最终将类的信息存储在方法区（Java 8及以前）或元空间（Java 8及以后）中，实现类的加载和初始化。

反射的原理是通过类加载机制获取类的Class对象（Class字节码对象），然后通过Class对象获取类的详细信息。反射的核心类是java.lang.reflect包下的类，如Class、Field、Method等。

类加载机制的过程通常分为以下几个步骤：

1. 加载：通过类的全限定名获取类的字节码文件（.class文件）并加载到内存中。
2. 验证：对已加载的字节码进行验证，确保字节码文件的正确性和安全性。
3. 准备：为类的静态变量在内存中分配空间，并赋予默认值。
4. 解析：将类的符号引用转换为实际引用，也就是将类的名称解析为具体的类。
5. 初始化：执行类的静态代码块，初始化静态变量和静态方法。

在类加载的过程中，Java虚拟机使用的是双亲委派模型，即从上到下逐级委托父类加载器加载类，直到达到启动类加载器，它是由C++编写的核心类加载器，负责加载Java标准库中的类。这种层次化结构可以有效避免类的重复加载和安全性问题。

反射与类加载机制的结合，使得我们可以在运行时动态地加载和操作类，例如创建对象、调用方法、访问属性等。反射的灵活性和动态性使得Java编程变得更加灵活和强大，但同时要注意使用反射可能会带来性能损耗，而且需要处理安全性问题。

#### 问题26：synchronized和lock的区别

答：synchronized和Lock都是Java中用于实现线程同步的机制，它们的主要区别如下：

1. 使用方式：synchronized是一种内置的关键字，可以直接使用，而Lock是一个接口，需要通过实例化具体的Lock类来使用，如ReentrantLock。
2. 锁的获取方式：synchronized关键字在进入同步代码块之前自动获取锁，并在退出同步代码块时自动释放锁，不需要手动操作。而Lock接口则需要手动调用lock()方法获取锁，并在执行完临界区代码后调用unlock()方法进行释放。
3. 可以响应中断：Lock接口提供了tryLock()和lockInterruptibly()方法，可以进行可中断的锁获取，而synchronized关键字在获取锁失败时无法响应中断。
4. 粒度：synchronized关键字的锁是以代码块为单位的，即进入一个同步代码块前需要获取锁，出代码块时释放锁。而Lock接口可以实现更细粒度的锁，可以在代码中任意位置获取和释放锁。
5. 可重入性：synchronized关键字是可重入的，同一个线程可以重复获取同一个锁，而Lock接口的具体实现可以通过构造函数选择是否支持可重入锁。

总之，synchronized是Java中内置的关键字，使用简单，但灵活性有限。而Lock接口则是一个更加灵活和可控的锁机制，可以提供更多的粒度和功能支持。在性能要求高、对并发控制有更精确要求的场景中，Lock接口通常比synchronized更加适用。

#### 问题27：hashmap和linkedhashmap区别

答：HashMap和LinkedHashMap是Java中两种常用的Map实现类，它们的主要区别如下：

1. 内部数据结构：HashMap使用哈希表来存储数据，具有较快的读取和插入速度，不保证元素的顺序。而LinkedHashMap在HashMap的基础上，使用了双向链表来维护元素的插入顺序，因此可以保证元素的顺序是插入顺序或者访问顺序。
2. 迭代顺序：HashMap的迭代顺序是不确定的，由于使用了哈希表，元素的存储位置和顺序可能发生变化。而LinkedHashMap的迭代顺序可以选择插入顺序（按照元素插入的先后顺序）或者访问顺序（按照元素被访问的先后顺序）进行遍历。
3. 内存开销：由于LinkedHashMap需要维护双向链表，相对于HashMap来说，LinkedHashMap占用更多的存储空间。因此，如果对内存要求较高，则可以选择使用HashMap。
4. 适用场景：如果需要根据插入顺序或者访问顺序来遍历元素，则可以选择使用LinkedHashMap。而如果不关心元素的顺序，只是需要快速的键值对映射关系，则可以选择使用HashMap。

需要注意的是，无论使用HashMap还是LinkedHashMap，在多线程环境下都需要考虑并发访问的问题，并使用相应的线程安全机制或同步策略来保证数据的一致性和安全性。



#### 问题28：redis是什么，使用场景，项目中哪些业务会用到redis？

答：Redis（Remote Dictionary Server）是一个开源的内存数据结构存储系统，用于支持各种数据结构的高效存储和访问。它主要用作高性能的键值存储数据库，也可以用作缓存、消息队列和分布式锁等功能。
以下是一些常见的 Redis 使用场景：

1.缓存：最常见的使用场景之一是将 Redis 用作缓存层。通过将经常访问的数据存储在 Redis 内存中，可以显著提高读取速度，减轻数据库的负载。由于 Redis 在内存中操作数据，读写速度非常快。
		2.分布式会话存储：在分布式系统中，可以使用 Redis 存储用户会话信息。通过将用户的会话数据存储在集中的 Redis 服务器中，可以轻松地实现跨多个应用服务器的会话共享和管理。
		3.消息队列：Redis 作为消息队列的中间件非常流行。它提供了发布-订阅模型，允许多个应用程序通过订阅频道来接收和处理消息。这在异步任务处理、事件驱动架构等场景中非常有用。
		4.实时数据分析：Redis 支持排序集合（Sorted Set）和计数器（Counter）等数据结构，使其非常适用于实时数据分析和排行榜功能的实现。
		5.地理位置应用：Redis 提供了地理位置索引（Geo Index）功能，可以存储和查询地理位置数据，用于实现基于地理位置的应用和服务，如附近的人、地理围栏等功能。

在项目中，以下业务常用到 Redis：

6.用户会话管理和认证：将用户会话信息存储在 Redis 中，以实现分布式会话管理和用户状态的跨应用共享。
		7.缓存加速：将一些常用的数据存储在 Redis 缓存中，以提高读取速度和减轻数据库负载。
		8.消息队列：使用 Redis 提供的发布-订阅模型来实现异步任务处理、事件驱动等功能。
		9.锁机制：Redis 提供原子性的操作，可以使用其实现分布式锁，用于保证资源的独占性和协调并发操作。

需要注意的是，虽然 Redis 具有高性能和许多便捷的功能，但它是基于内存的存储系统，对于大规模数据存储来说，内存容量和持久化方面可能需要一些额外的考虑和配置。

#### 问题29：redis的数据结构

答：Redis的数据结构包括以下几种：

1. 字符串（String）：最基本的数据类型，可以存储字符串、整数或浮点数。

```
SET key value
GET key
```

1. 列表（List）：可以存储以插入顺序排序的字符串元素。

```
LPUSH key value
RPUSH key value
LRANGE key start stop
```

1. 集合（Set）：可以存储一组唯一的字符串元素，不按插入顺序排序。

```
SADD key member
SMEMBERS key
SINTER key1 key2
```

1. 有序集合（Sorted Set）：类似于集合，但每个成员都有一个分数，根据分数排序。

```
ZADD key score member
ZRANK key member
ZREVRANGE key start stop
```

1. 哈希（Hash）：使用类似于字典的结构存储字段和与之关联的值

```
HSET key field value
HGET key field
HGETALL key
```

1. 位图（Bitmap）：可以存储位的字符串，支持位级操作。

```
SETBIT key offset value
GETBIT key offset
BITCOUNT key
```

1. 地理位置（Geospatial）：用于存储地理位置和执行地理位置相关的查询操作。

```
GEOADD key longitude latitude member
GEORADIUS key longitude latitude radius m|km|mi|ft [WITHCOORD] [WITHDIST] [ASC|DESC] [COUNT count]
```

以上是Redis的主要数据结构，每种数据结构都有相应的命令和操作可以使用。

#### 问题30：解释下redis中的缓存穿透，缓存雪崩，缓存击穿

答：缓存穿透（Cache Penetration）是指当缓存中不存在某个被请求的数据，而请求对应的数据也不存在于数据库中时，每次请求都要穿透缓存请求数据库，导致数据库负载过高。

缓存雪崩（Cache Avalanche）是指由于缓存中大量的缓存数据在同一时间失效或大规模更新，导致大量请求直接访问数据库，造成数据库压力过大，甚至宕机。

缓存击穿（Cache Breakdown）是指缓存中的某个热点数据在失效的瞬间，同时有大量的请求进来访问该热点数据，导致该热点数据的请求直接访问数据库，造成数据库负载过高。

为了解决这些问题，可以采取以下策略：

1. 缓存穿透：对请求的数据进行合法性校验，在缓存中如果不存在，则直接返回一个默认值或空值，避免对数据库造成压力，也可以使用布隆过滤器等数据结构进行缓存过滤。
2. 缓存雪崩：设置不同的缓存失效时间，避免所有缓存同时失效，或使用热点数据预加载、限流等策略，让数据在不同的时间间隔内失效，分散请求。
3. 缓存击穿：使用互斥锁或分布式锁机制，当某个热点数据失效时，只允许一个请求去访问数据库获取数据，并在获取到数据后更新缓存，其他请求则等待返回缓存中的数据。

另外，可以使用Redis的一些特性来避免或减轻缓存穿透、缓存雪崩和缓存击穿的问题，如设置合适的过期时间、使用持久化机制、使用备份缓存等。

#### 问题31：redis的集群部署和搭建流程

答：Redis集群部署和搭建流程如下：

1. 安装Redis：确保所有要作为Redis节点的服务器上都安装了Redis服务器。
2. 配置Redis：对于每个Redis节点，需要在redis.conf文件中进行相应的配置。主要配置项包括端口号、绑定地址、密码、集群模式等。
3. 创建集群配置文件：在任一Redis节点上创建集群配置文件。可以使用generate-cluster-config.sh脚本来生成配置文件模板。
4. 启动Redis节点：依次在每个节点上启动Redis服务器。在启动时，需要指定配置文件路径。
5. 创建集群：使用redis-trib.rb工具来创建Redis集群。该工具在Redis源码的src目录下的redis-trib.rb文件中。执行命令 `./redis-trib.rb create --replicas <replica> <node1-ip:port> <node2-ip:port> ... <nodeN-ip:port>` 来创建集群。
6. 验证集群状态：可以使用 `./redis-trib.rb check <node-ip:port>` 命令来检查集群的状态。
7. 添加节点：如果需要扩展集群，可以使用 `./redis-trib.rb add-node <new-node-ip:port> <existing-node-ip:port>` 命令添加新节点。
8. 移除节点：如果需要缩减集群，可以使用 `./redis-trib.rb del-node <node-to-be-removed-ip:port> <existing-node-ip:port>` 命令移除节点。
9. 故障转移：如果某个主节点发生故障，可以使用 `./redis-trib.rb call <node-ip:port>` 命令进行故障转移。

需要注意的是，以上流程针对的是Redis官方不推荐使用的Redis集群模式。推荐使用的是Redis Cluster，它是Redis官方提供的分布式解决方案。在Redis Cluster中，无需手动进行节点的添加和移除，而是由集群自动处理。详细部署和搭建Redis Cluster的流程请参考Redis官方文档。

#### 问题32：rocketmq kafka rabbitmq activemq重复消费的问题

答：方法必须设计成幂等,一旦设计成幂等,可能造成线程安全隐患,所以引入分布式锁

#### 问题33：rocketmq kafka rabbitmq activemq消息丢失的问题

答：**在哪里丢失？**

- 发送没成功，没有解决不成功的业务逻辑（1.发送端）
- rocketmq保存的时候，断电，宕机，丢失消息（2.运行端：运行的时候，消息储存在内存）
- 消费端丢失消息(3.消费端：没有成功处理消息,就直接返回success)

**1.发送端确保发送成功**

同步发送,接收发送结果,SEND_OK才结束，客户端代码底层都有默认重试(retry 3 times)

处理发送失败的逻辑：

1. 发送到备用/失败的队列
2. 记录日志,将消息来源,目标和消息内容,详细记录,等待监控系统,维护人员来直接处理.

**2.消费端确保消息不丢失**

1. 一定是先消息费,在确认,消费失败,返回失败(rocketmq消费点位保持原有位置不变,同—个消费者组,会重新拿到消息)

**3.运行端**

1. 使用同步刷盘
2. 双机热备：加一个broker-b-slave，使用同步刷盘

#### 问题34：redis的缓存策略

答：Redis的缓存策略可以根据使用情况和需求来选择，下面是几种常见的Redis缓存策略：

1. **LRU（Least Recently Used）：最近最少使用**，根据键的访问时间来淘汰最近最少使用的数据。
2. **LFU（Least Frequently Used）：最不经常使用**，根据键的访问频率来淘汰最不经常使用的数据。
3. **FIFO（First In, First Out）：先进先出**，根据键的插入时间来淘汰最早插入的数据。
4. **Random：随机淘汰数据**，通过随机算法选择要淘汰的数据。
5. **TTL（Time to Live）：设置过期时间**，通过设置键的过期时间来淘汰过期的数据。
6. **Maxmemory策略：当内存达到设置的最大使用量时**，根据指定的淘汰策略来淘汰数据。

可以根据具体的应用场景和数据特点来选择合适的缓存策略，以提高缓存效率和性能。

#### 问题35：如何保证redis和mysql的数据一致性

答：

1. 读写双写：在进行数据写入时，同时更新Redis和MySQL。这可以通过在应用程序中执行双写操作来实现。这确保了Redis和MySQL始终保持数据的一致性。然而，这种方法会增加数据写入的延迟，并且在高并发环境下可能会导致问题。
2. 使用消息队列：可以使用消息队列来将写入操作发送到两个系统之间。当写入操作被发送到消息队列时，Redis和MySQL都会将其作为一个事务进行处理。这种方式可以确保写操作是原子的并且顺序执行，从而保证数据一致性。
3. 使用数据库日志：可以使用MySQL的binlog或者Redis的AOF（append-only file）日志来记录数据更新操作，随后通过解析日志文件将更新操作应用到另一个系统。这样可以将Redis和MySQL之间的数据保持一致。但是这种方式可能会增加系统的复杂性。
4. 数据同步工具：可以使用一些专门的工具或者框架来实现Redis和MySQL之间的数据同步。例如，可以使用Redis的数据同步工具Redis Sentinel或Redis Cluster来确保Redis和MySQL之间的数据一致性。

#### 问题36：redis如何使用，布隆过滤器在项目中的作用

#### 问题37：说说你对内聚和耦合的理解

答：内聚和耦合是软件设计中两个重要的概念，它们描述了类或模块之间相互关系的紧密程度。

内聚（Cohesion）是指一个类或模块内各个成员之间相互联系的紧密程度。高内聚性表示一个类或模块内部的功能高度相关，各个成员之间的依赖性相对较低，功能单一。高内聚性有助于提高代码的可读性、可维护性和重用性，使得代码更加清晰、简单和易于理解。常见的内聚性有：功能内聚、信息内聚、顺序内聚、时间内聚等。

耦合（Coupling）是指一个类或模块与其他类或模块之间的依赖关系。低耦合性表示一个类或模块与其他类或模块之间的依赖较少、关联较弱，相互之间能够独立存在，修改一个类或模块的实现不会影响其他类或模块的正常运行。低耦合性有助于提高代码的可维护性、可扩展性和可测试性，减少了系统各个部分之间的依赖和影响。常见的耦合性有：内容耦合、公共耦合、外部耦合、控制耦合等。

在软件设计中，通常追求高内聚性和低耦合性的设计原则，即高内聚低耦合。通过增强类内的逻辑一致性和独立性，以及减少类与类之间的依赖性，可以提高代码的模块化和可维护性，使系统更加灵活、可扩展和可重用。设计高内聚低耦合的系统可以提高开发效率，减少bug的产生，提升软件质量。

#### 问题38：mybatis内连接和外联结的区别

答：内连接： 内连接是通过MATCH，INNER JOIN或JOIN关键字来实现的。

- 只返回两个连接表中的公共记录，即两个连接表中满足连接条件的记录。
- 当连接表中没有满足连接条件的记录时，内连接将返回空值。
- 内连接只返回连接表之间的交集。

外连接： 外连接分为左外连接和右外连接，分别通过LEFT JOIN和RIGHT JOIN关键字实现。

- 左外连接返回左表的全部记录和右表中满足连接条件的记录。
- 右外连接返回右表的全部记录和左表中满足连接条件的记录。
- 当连接表中没有满足连接条件的记录时，外连接将返回空值。
- 外连接返回连接表之间的并集。

#### 问题39：对mybatis的理解

答：MyBatis是一个优秀的持久层框架，它简化了数据库操作的过程，使开发人员能够更加专注于业务逻辑的实现。下面是对MyBatis的一些理解：

1. SQL与Java代码的分离：MyBatis使用XML或注解方式来配置和映射SQL语句，将SQL语句与Java代码分离，使得维护和管理SQL语句更加方便。
2. 简化数据库操作：MyBatis封装了底层的JDBC操作，开发人员只需要关注SQL语句的编写和参数的设置，不需要手动管理数据库连接、预编译和结果集处理等繁琐的操作。
3. 强大的动态SQL支持：MyBatis提供了强大的动态SQL语句的支持，可以根据条件动态生成SQL语句，避免了拼接SQL字符串带来的安全性和可维护性问题。
4. 缓存机制：MyBatis内置了一级缓存和二级缓存机制，可以减少对数据库的访问，提高系统性能。一级缓存是默认开启的，存放于SqlSession中，生命周期为同一次请求，二级缓存是可配置的，可以跨SqlSession进行共享。
5. 映射关系灵活：MyBatis支持多种方式进行对象与数据库表之间的映射，包括基于XML的配置文件和注解方式，可以根据项目的实际情况选择最适合的方式。
6. 插件机制：MyBatis提供了插件机制，可以通过自定义插件来扩展和增强MyBatis的功能，如自定义拦截器来实现性能监控、日志记录等功能。

总之，MyBatis是一个简单、灵活、高效的持久层框架，它提供了许多强大的特性和功能，使得数据库操作变得更加简单和高效。

#### 问题40：redis的持久化策略有哪些，区别是什么

答：
Redis提供了两种持久化策略：RDB持久化和AOF持久化。这两种策略在实现方式和特点上有所不同。

1. RDB持久化：
   - RDB（Redis Database）持久化是将Redis在某个时间点的数据状态保存到磁盘上的快照。它是默认的持久化方式。
   - RDB持久化通过fork一个子进程来异步地将数据写入磁盘。这个过程是一个快照操作，即Redis在某个时间点将当前数据集的副本写入磁盘。
   - RDB持久化适用于备份、数据恢复、灾难恢复等场景。它的优势是快速、紧凑且适用于大规模的数据集。
2. AOF持久化：
   - AOF（Append-Only File）持久化是通过追加方式将每个写操作追加到日志文件中，记录数据库状态的变化。
   - AOF持久化是以命令的形式记录每个写操作，以文本文件的形式保存在磁盘上。当Redis重启时，可以通过重新执行这些命令来恢复数据集。
   - AOF持久化可以通过不同的策略实现数据文件的同步，包括无刷写（no fsync）、每秒钟同步一次（everysec）和每次写操作同步一次（always）。
   - AOF持久化适用于数据的持久化和恢复，特别是在重启之后恢复数据时更为灵活和安全。

区别：

- RDB持久化相对于AOF持久化而言，数据文件较小且恢复速度更快。
- AOF持久化记录每个写操作，因此能提供更精确的数据恢复，但也相对于RDB持久化而言，数据文件较大且恢复速度较慢。
- AOF持久化在写操作上会引入额外的磁盘写入开销，可能会影响性能，但RDB持久化会有定期快照的读写性能损耗。

由于RDB持久化和AOF持久化各有优势，也可以同时开启使用。你可以根据实际需求和应用场景选择使用哪种持久化策略，或者同时使用两种持久化策略来提供更好的数据保护和恢复能力。

#### 问题41：springmvc的工作原理

答：

1. 客户端发送请求：当客户端发送一个HTTP请求（比如浏览器请求一个URL）时，请求会通过网络传输到Web服务器。
2. DispatcherServlet接收请求：在Spring MVC中，DispatcherServlet是前端控制器（Front Controller），它是应用程序的入口点。当请求到达Web服务器后，DispatcherServlet会接收并处理请求。
3. 处理器映射器（Handler Mapping）确定处理器：DispatcherServlet会通过处理器映射器（Handler Mapping）来确定适合处理该请求的处理器（Controller）。处理器映射器根据配置的URL映射规则，将请求与对应的处理器进行匹配。
4. 控制器处理请求：一旦处理器映射器确定适合的处理器，DispatcherServlet将请求发送给该处理器，也就是控制器（Controller）。控制器执行实际的业务逻辑，通常会调用服务层或者数据访问层来获取所需的数据，并进行相应的处理。
5. 处理器返回数据模型和视图：控制器处理请求之后，它将生成一个包含数据模型的Model对象，并将视图名字（View Name）返回给DispatcherServlet。
6. 视图解析器（View Resolver）解析视图：DispatcherServlet通过视图解析器（View Resolver）来解析控制器返回的视图名字。视图解析器会根据配置的规则，将视图名字解析为一个实际的视图对象。
7. 渲染视图：一旦视图解析器解析了视图，DispatcherServlet将携带模型数据的Model对象传递给视图对象。视图对象将使用模型数据来生成最终的响应结果，比如HTML页面、JSON数据等。
8. 返回响应：生成响应结果后，DispatcherServlet将该结果返回给客户端，作为HTTP响应。客户端（比如浏览器）将接收到这个响应并进行相应的处理，比如渲染页面或处理JSON数据。

#### 问题42：nacos心跳机制

答：Nacos（阿里巴巴开源项目）是一个用于动态配置管理和服务发现的平台，它提供了服务注册和发现、配置管理、健康检查等功能。Nacos使用心跳机制来维护服务的健康状态和可用性。

在Nacos中，服务注册和发现是通过客户端定期发送心跳来实现的。当一个服务实例启动时，它会向Nacos注册中心发送一条心跳消息，告知注册中心该实例的存在。注册中心会记录该实例的信息，并将其标记为健康状态。

定期发送心跳有两个作用：首先，它使得Nacos能够监测到服务实例的存活状态。如果一个服务实例在一段时间内没有发送心跳消息，Nacos将会将其标记为不健康状态，认为该实例不可用。其次，心跳还用于更新注册中心的服务实例列表。当有新的服务实例注册或注销时，Nacos会通过心跳消息来更新服务实例列表，以便其他服务可以发现并使用它们。

通过心跳机制，Nacos能够保持实时地监测服务实例的健康状态，并提供及时的服务发现功能。同时，通过合理配置心跳参数，可以灵活控制服务健康检查的频率和超时时间，以适应不同的环境和需求。

需要注意的是，心跳机制仅用于服务注册和发现，它并不涉及服务调用过程中的心跳检测。在服务间的通信过程中，如果需要进行心跳检测以确保连接的稳定性，可以在应用层面进行额外的处理。

#### 问题43：gateway作用是什么

答：API网关（API Gateway）是一种在微服务架构中使用的中间层组件，其作用是集中管理和控制对后端微服务的访问。API网关充当了前端客户端（例如移动应用程序、Web应用程序等）和后端微服务之间的入口点，提供一系列功能来增强和保护微服务架构。

下面是API网关的主要作用：

1. 路由和转发：API网关接收到客户端的请求后，根据不同的请求路径、HTTP方法或其他规则，将请求路由到相应的后端微服务实例。它可以根据需要对请求进行转发、合并、拆分或聚合，从而组织和管理微服务之间的调用关系。
2. 负载均衡：API网关可以在后端微服务之间进行负载均衡，以平衡请求的流量分布，并确保每个微服务实例都能够处理适量的请求。它可以采用不同的负载均衡策略，如轮询、权重、最少连接等，让请求在多个实例之间进行分发。
3. 安全认证和授权：API网关可以作为安全层来验证请求的身份，并对请求进行授权控制。它可以集成各种身份验证机制，如基于令牌的身份验证、OAuth等，确保只有经过身份验证和授权的请求可以访问受保护的资源。
4. 协议转换和数据格式转换：API网关可以实现协议和数据格式的转换，将客户端请求的协议（如HTTP、WebSocket）转换为后端微服务所需的协议（如gRPC、AMQP）；或者将请求和响应的数据格式进行转换，从而实现服务之间的兼容性和互操作性。
5. 缓存和性能优化：API网关可以缓存对后端微服务的请求和响应，以提高离客户端更近的位置的数据访问速度。它可以根据缓存策略设置缓存的有效期，减少对后端服务的负载，提高整体性能和响应时间。
6. 监控和日志记录：API网关可以收集请求和响应的指标数据，并提供监控和日志记录功能。它可以记录访问日志、错误日志、性能指标等，帮助开发人员和运维人员追踪和排查问题，进行系统性能调优和故障排除。

总的来说，API网关作为微服务架构的入口点，提供了统一的访问接口和控制机制，帮助开发者管理和保护后端微服务的访问，并提供了一系列增强功能，如负载均衡、安全认证、协议转换等，以提高系统的可伸缩性、安全性和可维护性。

#### 问题44：细说ioc，aop是什么，哪些业务会用到aop

答：当讨论软件开发中的面向对象编程和设计模式时，两个重要的概念是IOC（Inversion of Control，控制反转）和AOP（Aspect-Oriented Programming，面向切面编程）。

1. 控制反转（IOC）：
   IOC是一种软件设计原则，它指导着对象的创建、管理和依赖关系的处理方式。传统的编程模式中，对象之间的依赖关系通常由对象自身进行管理和创建。而使用IOC，对象的依赖关系将被反转，即对象不再负责自己的依赖关系，而是通过外部的容器（通常称为IOC容器）来管理。

在IOC中，对象的创建和依赖注入由IOC容器负责。开发人员只需要定义对象之间的依赖关系，并将其配置到IOC容器中。当需要使用某个对象时，IOC容器会自动创建该对象，并将所需的依赖注入到对象中。这样，对象之间的解耦和灵活性得到了提高，同时也方便了测试和维护。

常见的IOC容器有Spring框架中的ApplicationContext和BeanFactory，它们提供了依赖注入、对象生命周期管理、AOP等功能。

1. 面向切面编程（AOP）：
   AOP是一种编程范式，它通过将系统的关注点（如日志记录、事务管理、安全等）与业务逻辑分离，提供了一种更加模块化和可重用的方式来横向扩展应用程序。

AOP通过定义称为切面（Aspect）的模块化单元，将横切关注点从业务逻辑中剥离出来。切面可以包含一系列的通知（Advice），它们定义了在何时、何地以及如何与目标对象的方法进行交互。常见的通知类型包括前置通知（Before）、后置通知（After）、环绕通知（Around）、异常通知（After-Throwing）和返回通知（After-Returning）等。

AOP中的切面可以通过在源代码中的特定位置（如方法执行前后、抛出异常时等）进行声明，也可以使用特定的注解进行声明。AOP框架会利用编译时织入、运行时织入或动态代理等技术，在系统运行时将切面的逻辑织入到目标对象的方法中。

使用AOP可以在不修改原有业务逻辑代码的情况下，实现诸如日志记录、性能监控、事务管理等横切关注点的功能。它能够提高代码的重用性、可维护性和灵活性，并降低代码的重复性。

哪些业务会用到AOP取决于具体的应用场景，以下是一些常见的使用AOP的业务场景：

- 日志记录：在系统的关键操作或方法执行前后记录日志，以便后续的调试和监控。
- 事务管理：保证一系列操作在一个事务中执行，具备数据库事务的一致性和隔离性。
- 安全授权：检查用户权限，在方法执行前对用户进行验证和授权。
- 缓存管理：在方法执行前先检查缓存中是否存在数据，如果有则直接返回缓存中的数据，提高系统的性能。
- 异常处理：在方法执行过程中捕获异常并进行处理，比如记录异常信息、返回自定义错误信息等。
- 性能监控：记录方法的执行时间，对系统的性能进行监控和分析。

需要注意的是，并不是所有的业务都需要使用AOP。AOP更适合横切关注点明确而又多处重复出现的情况，例如日志记录、事务管理等。对于业务逻辑简单且关注点不容易提炼出来的场景，使用AOP可能反而增加了代码的复杂性。因此，在应用AOP时需要根据具体场景进行权衡和选择。

#### 问题45：spring springboot springcloud区别

答：

- spring主打：依赖注入、面向切面编程、数据访问、事务管理、Web开发等。
- Spring Boot是Spring框架的一种扩展，旨在简化Spring应用程序的开发和部署。它引入了自动配置和约定优于配置的原则，使开发人员无需进行繁琐的配置即可快速搭建一个可运行的应用程序。Spring Boot还提供了许多开箱即用的特性，如内嵌的服务器、自动化的依赖管理和健康检查等。
- Spring Cloud是一个构建分布式系统的框架，它基于Spring Boot构建，提供了一系列工具和组件，用于实现服务发现、配置管理、负载均衡、断路器模式等。Spring Cloud使得开发人员可以轻松构建弹性和可伸缩的微服务架构。

#### 问题46：rocketmq到底解决的是什么具体问题

答：RocketMQ是一个分布式消息队列组件，主要解决异步消息传递、分布式事务消息、流量削峰等问题。

1. 异步消息传递：RocketMQ可以实现消息的生产者和消费者之间的解耦，生产者将消息发送到RocketMQ的消息队列中，消费者根据订阅的主题（Topic）从队列中消费消息。这种异步消息传递的模式可以提高系统的性能和响应能力。
2. 分布式事务消息：RocketMQ支持分布式事务消息的发送和处理。当业务需要保证多个操作的一致性时，可以使用RocketMQ提供的事务消息功能，保证消息的发送和数据库的操作在一个事务中执行。
3. 流量削峰：通过使用消息队列，可以将瞬时大量的请求转化为消息，缓解系统的压力。RocketMQ的生产者和消费者之间采用异步方式，可以按照系统的处理能力消费和处理消息，从而削峰平谷，提高系统的稳定性和可靠性。
4. 可靠性消息传递：RocketMQ提供了丰富的可靠性保障机制，包括消息持久化、消息重试、消息顺序性等。这些机制可以确保消息的可靠性传递，避免消息丢失或重复消费等问题。

#### 问题47：SQL数据库和redis MongoDB 这几个原理是什么，为什么有这么大效率差别

答：**SQL数据库：**

1. 采用的是关系型数据模型，将数据储存在表中，每个表由列组成，每一条记录表示表中的一个实体，关系模型具有严格的结构和约束，确保数据的完整性和一致性。

2. ACID事务：SQL数据库提供了ACID（原子性，一致性，隔离性，持久性）事务支持，事务是一组操作的逻辑单元，要么全部执行成功，要么全部回滚，确保数据的一致性和可靠性。

3. 强大的查询语言：SQL数据库使用SQL语言来查询和操作数据，SQL语言具有丰富的操作符和函数，可进行复杂的查询分组的操作。

4. 可拓展性和性能优化：SQL可通过水平或垂直的方式进行拓展，以满足大规模数据化储存的需求。

5. 多用户支持：SQL数据库支持多用户的并发访问，通过锁机制来保证数据的一致性。

   

   **Redis数据库：**是一个高性能的基于键值对储存的NoSQL数据库（信息持久化，主从复制，哨兵机制，集群高可用）

   1. 内存储存：Redis将数据储存在内存中，因此读写性能极高，还提供了持久化机制，可写入硬盘。
   2. 数据类型丰富：包括字符串（String）、哈希（Hash）、列表（List）、集合（Set）和有序集合（Sorted Set）。
   3. 分布式缓存：Redis除了作为独立的数据库使用外，还可以作为分布式缓存系统，用于提高系统的性能和扩展性。Redis支持数据分片和主从复制，可以将数据分布在多个节点上，实现负载均衡和横向扩展。

   **MongoDB数据库：**是一个开源的，面向文档型的NoSQL数据库管理系统采用了BSON（Binary Json）的数据格式，支持动态模式和水平扩展，适用于大规模，高可用性和弹性的数据储存和处理。

   1. 文档模型：MongoDB用文档模型来储存数据，文档是类似于Json对象的Bson格式来表示，可以嵌套，支持数组等复杂数据结构，文档模型的灵活性使得对于不同类型的数据可以更加容易的建模和查询，适合储存半结构化的数据。
   2. 分布式储存：MongoDB支持数据的水平扩展，可以将数据分布在多个节点上，实现负载均衡和横向扩展。通过Sharding机制，数据可以被划分为多个分片（shard），每个分片可以存储部分数据，从而实现数据的分布存储和查询。
   3. 查询语言：MongoDB使用MongoDB Query Language (MQL)进行数据查询和操作，支持灵活的查询表达式、聚合管道和地理空间查询等功能。MQL可以根据文档的结构和特性灵活地进行查询和分析。
   4. 副本集：MongoDB支持数据的高可用性，通过副本集（Replica Set）来提供数据的冗余备份和故障恢复。副本集由多个节点组成，其中一个主节点（Primary）负责处理客户端的写请求，其他节点（Secondary）复制主节点的数据，并接受读取请求，以保证数据的可用性和一致性。
   5. 索引机制：MongoDB支持多种类型的索引，包括单字段索引、组合索引、全文索引和地理空间索引等。索引可以大幅提高查询的性能和效率，可以根据需要选择合适的索引类型。

